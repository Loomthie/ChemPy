<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TLC Plate</title>
</head>
<body>
    <div style="display: flex;">
    <canvas id="myCanvas" width="200" height="500" style="border: 2px solid black;"></canvas>
    <script type="text/javascript">

        const canvas = document.getElementById("myCanvas");
        const ctx = canvas.getContext("2d");

        ctx.fillStyle = "#fff";
        ctx.fillRect(0,0,canvas.offsetWidth,canvas.offsetHeight);
        ctx.stroke();

        const solventFront = .2 * canvas.offsetHeight;
        const startLine = canvas.offsetHeight - 50;

        ctx.fillStyle = "#ddd"
        ctx.fillRect(0,solventFront+2,canvas.offsetWidth,startLine-solventFront-2);

        ctx.moveTo(0,solventFront);
        ctx.lineTo(canvas.offsetWidth,solventFront);
        ctx.lineWidth = 4;
        ctx.stroke();

        const tlcSpots = {tlcSpots};
        
        ctx.beginPath();
        ctx.moveTo(0,startLine);
        ctx.lineTo(canvas.offsetWidth,startLine);
        ctx.lineWidth=4;
        ctx.strokeStyle = "#000";
        ctx.stroke();

        let x = 0
        let y = 0
        for (let i = 0; i<tlcSpots.length; i++){
            
            x = canvas.offsetWidth/(tlcSpots.length+1)*(i+1)
            
            for (let j = 0; j<tlcSpots[i][1].length;j++){
                y = startLine - tlcSpots[i][1][j]*(startLine-solventFront);
                ctx.beginPath();
                ctx.arc(x,y,20,0,2*Math.PI,true);
                ctx.fillStyle = tlcSpots[i][2][j]
                ctx.fill();
                ctx.stroke();
            }
            ctx.moveTo(x,startLine-10);
            ctx.lineTo(x,startLine+10);
            ctx.lineWidth = 4;
            ctx.stroke();

            ctx.font = "20px Arial";
            ctx.textAlign = "center";
            ctx.fillStyle = "#000"
            ctx.fillText(tlcSpots[i][0],x,startLine+30);
        }
    
    </script>

    <script>
        function saveImage()
        {
            const canvas = document.getElementById("myCanvas")
            let canvasUrl = canvas.toDataURL("image/jpeg");
            const createEl = document.createElement('a');
            createEl.href = canvasUrl;
            createEl.download = "TLCPlate";
            createEl.click();
            createEl.remove();
        }
    </script>

    <button id="Download" style="width:100px; height: 50px;margin-left: 20px;" onclick="saveImage()">Download</button>

    </div>

</body>
</html>